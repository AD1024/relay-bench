{
  "data": {
    "url": "graph-data.csv",
    "format": { "type": "csv" }
  },
  "facet": {
    "row":    { "field": "Target", "type": "nominal" },
    "column": { "field": "Model", "type": "nominal" }
  },
  "spec": {
    "transform": [
      {
      "window": [{
        "op": "max",
        "field": "NNVM",
        "as": "NNVMTime"
      }],
      "groupby": [
        "Model",
        "Target"
      ],
      "frame": [null, null]
    },
    {
      "calculate": "datum.Time/datum.NNVMTime",
      "as": "SlowdownRatio"
    }],
    "layer": [
      {
        "mark": {"type": "point", "filled": true},
        "encoding": {
        "y":      { "field": "IR", "type": "nominal" },
        "x":      { "field": "SlowdownRatio", "type": "quantitative",
                    "aggregate": "mean",
                    "axis": {"title": "(Inference Time) / NNVM"},
                    "scale": {"type": "log"} },
        "color": { "field": "IR", "type": "nominal" }
        }
      }
    ]
  }
}
